<!--{% block content %}
<div class="container">
    <h2>Create Account</h2>
    <form method="post" action="{% url 'create_account' %}">
        {% csrf_token %}
        <div class="form-group">
            <label for="username">Username</label>
            {{ form.username }}
        </div>
        <div class="form-group">
            <label for="email">Email</label>
            {{ form.email }}
        </div>
        <div class="form-group">
            <label for="password">Password</label>
            {{ form.password }}
        </div>
        <div class="form-group">
            <label for="first_name">First Name</label>
            {{ form.first_name }}
        </div>
        <div class="form-group">
            <label for="last_name">Last Name</label>
            {{ form.last_name }}
        </div>
        <div class="form-group">
            <label for="division">Division</label>
            {{ form.division }}
        </div>
        <div class="form-group">
            <label for="unit">Unit</label>
            {{ form.unit }}
        </div>
        <button type="submit" class="btn btn-primary">Create Account</button>
    </form>
</div>

<script>
    const divisionSelect = document.getElementById('division-select');
    const unitSelect = document.getElementById('unit-select');

    const unitOptions = {
        'MSD': ['HRMDU', 'Cashier', 'Finance'],
        'LHSD': ['MAIP', 'LHS Chief', 'Pharmacy'],
        'RD/ARD': ['Research', 'Legal', 'PACD', 'RD', 'ARD'],
        'RLED': ['Unit 1', 'Unit 2', 'Unit 3'] // Example for RLED
    };

    divisionSelect.addEventListener('change', function () {
        const selectedDivision = divisionSelect.value;
        const units = unitOptions[selectedDivision] || [];

        // Clear existing options
        unitSelect.innerHTML = '';

        // Add a placeholder option
        const placeholderOption = document.createElement('option');
        placeholderOption.textContent = 'Select Unit';
        placeholderOption.value = '';
        unitSelect.appendChild(placeholderOption);

        // Populate new options
        units.forEach(unit => {
            const option = document.createElement('option');
            option.textContent = unit;
            option.value = unit;
            unitSelect.appendChild(option);
        });
    });
</script>
{% endblock %} 

class AuthorizedPersonnelForm(forms.ModelForm):
    DIVISION_CHOICES = (
        ('MSD', 'MSD'),
        ('RLED', 'RLED'),
        ('RD/ARD', 'RD/ARD'),
        ('LHSD', 'LHSD'),
    )

    division = forms.ChoiceField(choices=DIVISION_CHOICES, required=True, widget=forms.Select(attrs={'class': 'form-control', 'id': 'division-select'}))
    unit = forms.ChoiceField(required=False, widget=forms.Select(attrs={'class': 'form-control', 'id': 'unit-select'}))

    class Meta:
        model = User
        fields = ['username', 'email', 'password', 'first_name', 'last_name', 'division', 'unit']
        widgets = {
            'username': forms.TextInput(attrs={'class': 'form-control'}),
            'password': forms.PasswordInput(attrs={'class': 'form-control'}),
            'email': forms.EmailInput(attrs={'class': 'form-control'}),
            'first_name': forms.TextInput(attrs={'class': 'form-control'}),
            'last_name': forms.TextInput(attrs={'class': 'form-control'}),
        }

        -->
